<section>
  <table mat-table [dataSource]="dataSource" [ngClass]="{'d-none': !dataSource }" multiTemplateDataRows>
      <ng-container class="mat-row" *matNoDataRow>
        <td class="mat-cell no-data-cell" [attr.colspan]="displayedColumns.length">
          No se encontraron resultados
        </td>
      </ng-container>

      <ng-container matColumnDef="capita_origen">
        <th mat-header-cell *matHeaderCellDef> Fuente Ingreso Origen </th>
        <td mat-cell *matCellDef="let param"> {{ param.nombre_fuente }} </td>
      </ng-container>

      <ng-container matColumnDef="producto_origen">
        <th mat-header-cell *matHeaderCellDef> Producto </th>
        <td mat-cell *matCellDef="let param"> {{ param.nombre_prod }} </td>
      </ng-container>

      <ng-container matColumnDef="sub_producto_origen">
        <th mat-header-cell *matHeaderCellDef> Subproducto </th>
        <td mat-cell *matCellDef="let param"> {{ param.nombre_sub_prod }} </td>
      </ng-container>

      <ng-container matColumnDef="plan_origen">
        <th mat-header-cell *matHeaderCellDef> Plan </th>
        <td mat-cell *matCellDef="let param"> {{ param.nombre_plan }} </td>
      </ng-container>

      <ng-container matColumnDef="capita_rel">
        <th mat-header-cell *matHeaderCellDef> Fuente Ingreso Destino </th>
        <td mat-cell *matCellDef="let param"> {{ param.nombre_fuente_rel }} </td>
      </ng-container>
  
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef aria-label="row actions"> Acciones </th>
        <td mat-cell *matCellDef="let element">
          <button class="action-button" (click)="view(element)">
            <mat-icon class="edit-icon" aria-label="false"> visibility </mat-icon>
          </button>
          <button class="action-button" (click)="edit(element)">
            <mat-icon class="delete-icon" aria-label="false"> edit </mat-icon>
          </button>

          <button class="action-button" aria-label="false" (click)="
            expandedElement = expandedElement === element ? null : element;
            $event.stopPropagation()
          ">
          <mat-icon *ngIf="expandedElement !== element"> keyboard_arrow_down</mat-icon>
          <mat-icon *ngIf="expandedElement === element"> keyboard_arrow_up </mat-icon>
        </button>

        </td>
      </ng-container>

      <ng-container matColumnDef="expandedDetail">
        <td mat-cell *matCellDef="let param" [attr.colspan]="columnsToDisplayWithExpand.length">
          <div class="detailExpand" [@detailExpand]="
              param == expandedElement ? 'expanded' : 'collapsed'
            ">
            <div class="detailExpand-container">
              <span class="detailExpand-item text"> Tipo de Movimiento Origen </span>
              <span class="detailExpand-item text"> Monotributo </span>
              <span class="detailExpand-item num"> Secuencia </span>
            </div>
            <div class="detailExpand-list">
              <span class="detailExpand-item text">
                {{ param.mov_origen }}
              </span>
              <span class="detailExpand-item text">
                {{ param.monotributo }}
              </span>
              <span class="detailExpand-item num">
                {{ param.sec_prod_rel }}
              </span>
              
            </div>
          </div>
        </td>
      </ng-container>
      
      <tr mat-header-row *matHeaderRowDef="columnsToDisplayWithExpand"></tr>
      <tr mat-row *matRowDef="let element; columns: columnsToDisplayWithExpand" [class.detailExpand-element]="true"
        [class.detailExpanded-row]="expandedElement === element" [class.selected]="expandedElement === element"
        [ngClass]="{ 'hover-row': expandedElement !== element }">
      </tr>
      <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detailExpand-row"></tr>
    </table>
  
    <mat-paginator [pageSizeOptions]="[10, 20, 30]" [pageSize]="10" showFirstLastButtons
      aria-label="Controles de paginaciÃ³n." [ngClass]="{'d-none': !dataSource || this.dataSource.data.length < 10 }">
    </mat-paginator>
  </section>
