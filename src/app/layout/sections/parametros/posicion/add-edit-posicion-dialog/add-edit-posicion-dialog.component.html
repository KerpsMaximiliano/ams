<div class="dialog-title" [tabIndex]="0">
  <h2> {{ data.title | uppercase }} </h2>
</div>

<div class="dialog-content">
  <form class="form-datos" [formGroup]="formGroup">
    <div class="seeker-fields-container">
      <h3> Código </h3>
      <mat-form-field class="seeker-form-field" appearance="outline">
        <input matInput formControlName="codigo_posicion" type="number" required min="1" max="999" maxlength="3"
          [readonly]="!data.edit">
        <mat-error *ngIf="formGroup.get('codigo_posicion')?.invalid && formGroup.get('codigo_posicion')?.touched">
          {{ getErrorMessage(formGroup.get('codigo_posicion')) }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="seeker-fields-container">
      <h3> Posición </h3>
      <mat-form-field class="seeker-form-field" appearance="outline">
        <input matInput type="text" formControlName="descripcion" required minlength="1" maxlength="30"
          [readonly]="!data.edit">
        <mat-error *ngIf="formGroup.get('descripcion')?.invalid && formGroup.get('descripcion')?.touched">
          {{ getErrorMessage(formGroup.get('descripcion')) }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="seeker-fields-container" style="column-gap: 0px !important;">
      <h3> Localidad </h3>
      <mat-form-field appearance="outline" floatLabel="always" class="seeker-form-field" appearance="outline">
        <input matInput formControlName="localidad" required minlength="1" maxlength="50" [readonly]="true">
      </mat-form-field>
      <button class="primary-button" style="height: 40px; width: 5px; padding-left: 5px; margin-top: 5px;"
        (click)="getLocalidad()">
        <mat-icon> search </mat-icon>
      </button>
    </div>

    <div class="seeker-fields-container">
      <h3>Domicilio</h3>
      <mat-form-field class="seeker-form-field" appearance="outline">
        <input matInput formControlName="domicilio" required minlength="1" maxlength="50" [readonly]="!data.edit">
        <mat-error *ngIf="formGroup.get('domicilio')?.invalid && formGroup.get('domicilio')?.touched">
          {{ getErrorMessage(formGroup.get('domicilio')) }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="seeker-fields-container">
      <h3> Control de Rechazo </h3>
      <mat-form-field class="seeker-form-field" appearance="outline">
        <mat-select formControlName="control_rechazo">
          <mat-option [value]="'S'"> SI </mat-option>
          <mat-option [value]="'N'"> NO </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngIf="data.title!='Nueva Posicion'">
      <div class="seeker-fields-container">
        <h3> Estado </h3>
        <mat-form-field class="seeker-form-field" appearance="outline">
          <mat-select [(value)]="vigencia" disabled="true">
            <mat-option [value]="true"> Activo </mat-option>
            <mat-option [value]="false"> Baja </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <div *ngIf="data.edit; else other_content" class="buttons-container">
      <button class="primary-button icon-button" type="button" (click)="closeDialog()">
        <mat-icon> close </mat-icon>
        Cancelar
      </button>

      <button class="primary-button icon-button" (click)="fecha(formGroup.get('fecha_vigencia')?.value)"
        *ngIf="data.title!='Nueva Posicion'" [disabled]="!vigencia">
        <mat-icon> delet </mat-icon>
        Baja
      </button>

      <button class="primary-button icon-button" type="submit" [disabled]="formGroup.invalid" (click)="confirm()">
        <mat-icon> done </mat-icon>
        Guardar
      </button>
    </div>

    <ng-template #other_content>
      <button class="primary-button icon-button" mat-dialog-close>
        <mat-icon> done </mat-icon>
        Aceptar
      </button>
    </ng-template>
  </form>
</div>
